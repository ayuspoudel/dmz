#!/bin/bash

ZSH_HOME="$HOME/.dotmanz/zsh"

# Color definitions
RED="\033[0;31m"
GREEN="\033[0;32m"
YELLOW="\033[1;33m"
BLUE="\033[0;34m"
RESET="\033[0m"

cmd="$1"
shift

case "$cmd" in
  aws|git|docker|terraform|aliases|prompt|plugins|path|safety|dynatrace|automation)
    if [[ -f "$ZSH_HOME/helpers.zsh" ]]; then
      source "$ZSH_HOME/helpers.zsh"
      alias_group "$cmd" "$@"
    else
      echo -e "${RED}Error:${RESET} helpers.zsh not found in ${ZSH_HOME}"
      exit 1
    fi
    ;;
  add)
    name="$1"
    if [[ -z "$name" ]]; then
      echo -e "${RED}Usage:${RESET} dot add <group-name>"
      exit 1
    fi
    filepath="$ZSH_HOME/${name}.zsh"
    if [[ -f "$filepath" ]]; then
      echo -e "${YELLOW}Warning:${RESET} ${name}.zsh already exists at $filepath"
    else
      echo "# ${name}.zsh" > "$filepath"
      echo -e "${GREEN}Created:${RESET} $filepath"
    fi
    ;;
  help|"")
    if [[ -f "$ZSH_HOME/helpers.zsh" ]]; then
      source "$ZSH_HOME/helpers.zsh"
      help
    else
      echo -e "${RED}Error:${RESET} helpers.zsh not found in ${ZSH_HOME}"
    fi
    ;;
  *)
    echo -e "${RED}Unknown command:${RESET} $cmd"
    echo -e "${BLUE}Usage:${RESET} dot help"
    ;;
esac
